execute as @a at @s run function magic_flute:player_tick with entity @s

execute as @e if predicate magic_flute:max_slowness \
   run attribute @s jump_strength base set 0
execute as @e unless predicate magic_flute:max_slowness \
   run attribute @s jump_strength base reset

give @a[scores={flute_spells=1..}] written_book[written_book_content={title:"Book of Spells",author:"TheKillerBunny",generation:3,pages:[["   ",{"text":"Book of Spells!\n\n","bold":true,"underlined":true},{"text":"To see how to cast a spell, just hover over the spell name!\n\n      "},{"text":"Categories\n\n","bold":true,"underlined":true},"• ",{"text":"Healing\n","color":"red","bold":true,"hover_event":{"action":"show_text","value":[{"text":"Click to go to the healing section"}]},"click_event":{"action":"change_page","page":2}},"• ",{"text":"Support\n","color":"dark_green","bold":true,"hover_event":{"action":"show_text","value":[{"text":"Click to go to the support section"}]},"click_event":{"action":"change_page","page":3}},"• ",{"text":"Combat","color":"blue","bold":true,"hover_event":{"action":"show_text","value":[{"text":"Click to go to the combat section"}]},"click_event":{"action":"change_page","page":4}}],["         ",{"text":"Healing\n\n","color":"red","bold":true,"underlined":true},"• ",{"text":"Heal Self\n","color":"red","bold":true,"hover_event":{"action":"show_text","value":[{"text":"\n\n"},{"text":"ac11332b","font":"magic_flute:ui"},{"text":" "}]}},"• ",{"text":"Feed Self","color":"gold","bold":true,"hover_event":{"action":"show_text","value":[{"text":"\n\n"},{"text":"ac44223b","font":"magic_flute:ui"},{"text":" "}]}}],["        ",{"text":"Support\n\n","color":"dark_green","bold":true,"underlined":true},"• ",{"text":"Grow Crops\n","color":"dark_green","bold":true,"hover_event":{"action":"show_text","value":[{"text":"\n\n"},{"text":"ac53243b","font":"magic_flute:ui"},{"text":" "}]}},"• ",{"text":"Water Breathing\n","color":"dark_aqua","bold":true,"hover_event":{"action":"show_text","value":[{"text":"\n\n"},{"text":"ac55434b","font":"magic_flute:ui"},{"text":" "}]}},"• ",{"text":"Agility Boost\n","color":"dark_gray","bold":true,"hover_event":{"action":"show_text","value":[{"text":"\n\n"},{"text":"ac23442b","font":"magic_flute:ui"},{"text":" "}]}},"• ",{"text":"Fire Resistance","color":"gold","bold":true,"hover_event":{"action":"show_text","value":[{"text":"\n\n"},{"text":"ac21323b","font":"magic_flute:ui"},{"text":" "}]}}],["         ",{"text":"Combat\n\n","color":"blue","bold":true,"underlined":true},"• ",{"text":"Freeze Nearby\n","color":"blue","bold":true,"hover_event":{"action":"show_text","value":[{"text":"\n\n"},{"text":"ac31231b","font":"magic_flute:ui"},{"text":" "}]}},"• ",{"text":"Levitation","color":"dark_gray","bold":true,"hover_event":{"action":"show_text","value":[{"text":"\n\n"},{"text":"ac13432b","font":"magic_flute:ui"},{"text":" "}]}}]]}] 1
scoreboard players reset @a flute_spells
scoreboard players enable @a flute_spells

